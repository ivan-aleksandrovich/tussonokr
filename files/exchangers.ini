[main]
; рабочая директория
workDirectory = /linuxcash/cash/data/tmp/exchangers

; директория для лога
logDirectory = /linuxcash/logs/current

[UNLOAD]
; список конвертеров данных разделенный запятыми (aif, oracle, shtrih, smag, atol, atol-astor, crystal, ns2000, pilot, sap, pilot-original)
converter = aif

; интервал проверки запросов выгрузки продаж (в секундах)
unloadSalesInterval = 10

; интервал выгрузки текущих продаж (в секундах)
; если указать значение 0, то текущие продажи выгружаться не будут
unloadCurrentSalesInterval = 0

; директория, в которую будут складываться бэкапы продаж
backupDir = /linuxcash/cash/data/backup/sales

; Максимальное количество архивов для одной кассы в бэкап директории (устаревшие архивы будут удаляться)
; Если указать значение 0, то данная настройка учитываться не будет
maxCountBackupFiles = 30

; Количество дней актуальности архивов для одной кассы в бэкап директории (устаревшие архивы будут удаляться)
; Если указать значение 0, то данная настройка учитываться не будет
actualCountDaysForBackupFiles = 30

; Выгрузка смен по файлу-флагу (по умолчанию 0)
; 0 – закрытые
; 1 – открытые
; 2 – открытые и закрытые
closedShiftsByFileFlag = 0

; Создавать флаг успешной выгрузки
; По умолчанию не создается
;pathUnloadFinishFlag = /tmp/unload%(year)s.%(month)s.%(day)s_%(hour)s-%(min)s-%(sec)s.flg

[unload.converter.aif]
; путь выгрузки продаж
salePath = /tmp/sale%(year)s.%(month)s.%(day)s_%(hour)s-%(min)s-%(sec)s.json

;Перезапись целевого файла при копировании файлов из рабочей директории
rewriteDestFile = True

; тип выгружаемых данных. sales - продажи, crights - журнал событий, all - и продажи и журнал событий. По умолчанию: sales
dataType = sales

; путь к файлу-флагу выгрузки продаж
flagPath = /tmp/sale.req

; путь выгрузки оперативных продаж
onlineSalePath = /tmp/salesOnline/sale.json

[unload.converter.shtrih]
;<параметры_конвертера>
; путь выгрузки продаж
salePath = /tmp/sales/sale%(shiftnum)s.rep

; путь к файлу-флагу выгрузки продаж
flagPath = /tmp/sales/sale.req

;Параметр определяет, детализировать ли скидки на чек по позциям
discountsDetail = True

;Параметр определяет, выгружать ли поле acode для транзакций 50/51 (внесение/выем)
;useActorCodeForMoneyOperations = True

; Выгрузка даты в сокращенном формате 'дд.мм.гг'. По умолчанию формат даты 'дд.мм.гггг'
;unloadShortDateFormat = true

;Выгружать тип платежной карты True - брать тип карты из документа, False - тип карты из настройки defaultCardType. По умолчанию True.
;unloadCardType=True

; Тип платежной карты по умолчанию для выгрузки в 40-й транзакции.
;defaultCardType =

;Перезапись целевого файла при копировании файлов из рабочей директории
;rewriteDestFile = false

; Параметр определяет, выгружать ли комиссии по платежам (по умолчанию не выгружать)
unloadPaymentCommission = false

; Кодовая страница данных. Если значение параметра не установлено, используется windows-1251
; Примеры кодировок: utf_8, U8, UTF, utf8, cp1251, windows-1251, cp866, 866, IBM866 и др.
charset = cp1251

; Дополнительно выгружать оплату при безналичном расчете (95 транзакция) (по умолчанию не выгружать)
;unloadPaymentByCard = False

; Выгружать начисления бонусов (по умолчанию не выгружать)
;unloadBonuses = False

;Выгружать акцизные марки
;По умолчанию False
;unloadExciseMark = False

; Использовать транзакцию 300 для выгрузки документов (инвентаризация, возврат поставщику)
; Иначе выгружаются двумя транзакциями: 302 - инвентаризация, 308 - возврат поставщику
; По умолчанию True
;useTransaction300ForDocuments = True

; Выгружать данные о смене из ФР
; По умолчанию False
;unloadShiftsFromKkm = False

; Использовать вместо номера чека в транзакции макроподстановку
; По умолчанию используется номер чека
;checkNumTransaction = %(shiftnum)04d%(checknum)05d

; Выгружать неоткрытые смены
; По умолчанию неоткрытые смены не выгружаются
;unloadNotOpenedShift = False

; Выгружать в транзакции регистрации сторнированной позиции код кассира, создавшего чек
; По умолчанию False
;useCheckCashierCodeForStorno = False

; Сохранять файл реестра выгрузки
; По умолчанию False
;saveRegistry = False

; Путь к файлу реестра выгрузки
; По умолчанию /tmp/sales/sales.reg
;registryFilePath = /tmp/sales/sales.reg

[unload.converter.atol]
;<параметры_конвертера>
; путь выгрузки продаж
salePath = /tmp/sales/sale%(shiftnum)s.rep

; путь к файлу-флагу выгрузки продаж
flagPath = /tmp/sales/sale.req

;Перезапись целевого файла при копировании файлов из рабочей директории
;rewriteDestFile = false

;Параметр определяет, детализировать ли скидки на чек по позциям
discountsDetail = True

; Кодовая страница данных. Если значение параметра не установлено, используется windows-1251
; Примеры кодировок: utf_8, U8, UTF, utf8, cp1251, windows-1251, cp866, 866, IBM866 и др.
charset = cp1251

; путь выгрузки оперативных продаж
onlineSalePath = /tmp/salesOnline/export.txt

[unload.converter.atol-astor]
;<параметры_конвертера>
; путь выгрузки продаж
salePath = /tmp/sales/sale%(shiftnum)s.rep

; путь к файлу-флагу выгрузки продаж
flagPath = /tmp/sales/sale.req

;Перезапись целевого файла при копировании файлов из рабочей директории
;rewriteDestFile = false

;Параметр определяет, детализировать ли скидки на чек по позциям
discountsDetail = True

; Кодовая страница данных. Если значение параметра не установлено, используется windows-1251
; Примеры кодировок: utf_8, U8, UTF, utf8, cp1251, windows-1251, cp866, 866, IBM866 и др.
charset = cp1251

; путь выгрузки оперативных продаж
onlineSalePath = /tmp/salesOnline/export.txt

[unload.converter.smag]
;<параметры_конвертера>
; путь выгрузки продаж
;salePath = /tmp/sales/

; Формат данных, которыми обмениваются касса и товароучетная система. Тип файлов
; dat означает обмен данными через текстовые файлы csv (данные разделенные запятыми),
; dbf - обмен данными через dbf файлы.
;fileType = dat
;fileType = dbf

; Кодовая страница данных. Если значение параметра не установлено, используется windows-1251
; Примеры кодировок: utf_8, U8, UTF, utf8, cp1251, windows-1251, cp866, 866, IBM866 и др.
;charset = cp866

; Директория в которую касса выкладывает результаты продаж текущей смены,
; предназначенные для учетной системы.
;currentSalesPath = /tmp/currentSales

; Код позиции начисления бонусов
;earnPositionCode = 999999

; Номер карты при начислении бонусов
;earnCardNumber = 99999999

; Код оплаты бонусами
;spendPaymentCode = 10

; Код отдела позиции начисления бонусов
;earnDeptCode = 0

; Дописывать файлы, расположенные в целевом каталоге с выгруженными продажами
; По умолчанию: false
;appendSaleFiles = true

;Перезапись целевого файла при копировании файлов из рабочей директории
;rewriteDestFile = false

; Распределять оплаты по позициям
;distributePaymentsForPositions = false

[unload.converter.smag.valut]
;<Соотвествие типов оплат на кассе и учетной системе>
; <код_типа_оплаты_артикс>=<код_типа оплаты_асту>
;1 = 4

[unload.converter.oracle]
;<параметры_конвертера>
; путь выгрузки продаж (директория)
;salePath = /tmp/sales

[unload.converter.oracle.valut]
;<соответствие кодов валюты>
; <код валюты> = <код высокого уровня типа оплаты>, <код низкого уровня типа оплаты>
1 = CASH, 1000
;3 = DCARD, 8000

[unload.converter.oracle.measure]
; <соответствие кодов единицы измерения>
; <код единицы измерения - артикс> = <код единицы измерения - oracle>
; EA - Штука, G - ГРАММ, GM - ГРАММЫ, KG - КИЛОГРАММ, L - ЛИТР, ML - МИЛЛИЛИТР
1 = EA
2 = KG
;3 = L

[unload.converter.ns2000]
;<параметры_конвертера>
; путь выгрузки продаж (директория)
salePath = /tmp/sales/
; Кодовая страница данных. Если значение параметра не установлено, используется windows-1251
; Примеры кодировок: utf_8, U8, UTF, utf8, cp1251, windows-1251, cp866, 866, IBM866 и др.
charset = cp1251

[unload.converter.pilot]
;<параметры_конвертера>
; путь выгрузки продаж (директория)
salePath = /tmp/sales/
; Кодовая страница данных. Если значение параметра не установлено, используется windows-1251
; Примеры кодировок: utf_8, U8, UTF, utf8, cp1251, windows-1251, cp866, 866, IBM866 и др.
charset = cp1251

[unload.converter.crystal]
;<параметры_конвертера>
; путь выгрузки продаж (директория)
salePath = /tmp/crystal/reports

; формировать информацию о скидках
formdiscounts = True

[unload.converter.crystal.payment]
; <Соответствие типов оплаты (cash, credit)и кодов валюты>
; <тип оплаты crystal> = <код валюты в артикс>
; По умолчанию cash - 1, credit - 0. Все остальные валюты - банковские операции (bank)
;cash = 1
;credit = 0

[unload.converter.sap]
; путь выгрузки продаж
salePath = /tmp/sales/export_%(year)s%(month)s%(day)s.xml

;Перезапись целевого файла при копировании файлов из рабочей директории.
;true - перезаписывать, false - нет. По умолчанию false.
;rewriteDestFile = false

; путь выгрузки оперативных продаж
onlineSalePath = /tmp/salesOnline/sales_%(year)s.%(month)s.%(day)s_%(hour)s-%(min)s-%(sec)s.xml

; Значение поля ROOT. Тип - текстовый. По-умолчанию - пустое
;rootString =

[unload.converter.pilot-original]
;<параметры_конвертера>
; путь выгрузки продаж 
salePath = /tmp/sales/%(year)s%(month)s%(day)s_%(cashcode_int)04d%(shiftnum_int)04d.cl
; Кодовая страница данных. Если значение параметра не установлено, используется cp866
; Примеры кодировок: utf_8, U8, UTF, utf8, cp1251, windows-1251, cp866, 866, IBM866 и др.
charset = cp866
;Перезапись целевого файла при копировании файлов из рабочей директории (по умолчанию false)
;rewriteDestFile = false

[UPLOAD]
; Количество процессов
poolProcessSize = 1

; Период сканирования данных. Задается в секундах
timeoutFlagFind = 20

; Период перечитывания нод. Задается в секундах.
timeoutNodeReread = 300

; Максимальное количество архивов для одного магазина в бэкап директории (устаревшие архивы будут удаляться)
; Если указать значение 0, то данная настройка учитываться не будет
maxCountBackupFiles = 30

; Количество дней актуальности архивов для одного магазина в бэкап директории (устаревшие архивы будут удаляться)
; Если указать значение 0, то данная настройка учитываться не будет
actualCountDaysForBackupFiles = 30

; список конвертеров данных разделенный запятыми (aif, oracle, shtrih, smag-ukm, smag-ukm4, users, crystal, atol, sap, cif1)
converter = aif

; директория, в которую будут складываться бэкапы справочников
backupDir = /linuxcash/cash/data/backup/dicts

; Останавливать конвертирование для магазина, у которого произошла ошибка при конвертировании справочника.
stopConvertIfBadDict = false

; Директория для сохранения справочников, при обработке которых произошли ошибки.
; Справочники с ошибками будут перемещаться в указанную директорию только если установлено stopConvertIfBadDict = false
; если установлено stopConvertIfBadDict = true, то справочники с ошибками будут оставаться в рабочей директории, пока их не удалят.
badDictsDirectory = /linuxcash/cash/data/backup/badDicts

; Создавать флаг успешной загрузки
; По умолчанию не создается
;pathUploadFinishFlag = /tmp/upload%(year)s.%(month)s.%(day)s_%(hour)s-%(min)s-%(sec)s.flg

[upload.converter.aif]
; список файлов-флагов, разделенный запятыми
flags = /tmp/dict/aif/pos*.flz

; список файлов-справочников, разделенный запятыми
data = /tmp/dict/aif/pos*.aif

; файл в который будет записываться текст последней ошибки конвертирования
;errorDest = /tmp/dict/aif/error.txt

; Значение по умолчанию для поля "bybarcode" команды "addHotKey"
; hotKeyByBarcode = False

; Проверять файлы флагов и справочников на полное совпадение имен. По умолчанию False.
; checkMatchFileNames = False

[upload.converter.shtrih]
; список файлов-флагов, разделенный запятыми
;flags = /tmp/dict/shm/pos*.flz

; список файлов-справочников, разделенный запятыми
;data = /tmp/dict/shm/pos*.spr

; файл в который будет записываться текст последней ошибки конвертирования
;errorDest = /tmp/dict/shm/error.txt

; разделитель данных (по умолчанию - ";")
;delimiter = ;

; Использовать имя кассира в качестве кода (default False)
;cashierName = False

; Загружать горячие клавиши со способом назначения "по штрихкоду"
; hotKeyByBarcode = False

; Автоматически добавлять к товару признак "Проверять ограничения продаж" (по умолчанию False)
; requireSaleRestrict = False

[upload.converter.atol]
; список файлов-флагов, разделенный запятыми
;flags = /tmp/dict/atol/import.flz

; список файлов-справочников, разделенный запятыми
;data = /tmp/dict/atol/import.txt

; файл в который будет записываться текст последней ошибки конвертирования
;errorDest = /tmp/dict/atol/error.txt

; Использовать поле 33 справочника товаров для определения единицы измерения товара
; Если значение поля 33 меньше 1.0, то товар считается дробным(код равен '2') независимо от значения поля 8.
; Если настройка выключена, либо значение поля 33 больше либо равно 1.0 или отсутствует, то единица измерения берётся из поля 8.
; По умолчанию False
;useMultiplicityQuantityForMeasure = False

[upload.converter.smag-ukm]
; список файлов-флагов, разделенный запятыми
;flags = /tmp/dict/smag/*.cng, /tmp/dict/smag/*.upd

; список файлов-справочников, разделенный запятыми
;data = /tmp/dict/smag/*.dat

; файл в который будет записываться текст последней ошибки конвертирования
;errorDest = /tmp/dict/smag/error.txt

; Кодовая страница данных.
; Примеры кодировок: utf_8, U8, UTF, utf8, cp1251, windows-1251, cp866, 866, IBM866 и др.
charset = 866

; формат данных (dat, dbf)
format = dat

; код роли пользователя по умолчанию
defaultRoleCode = 3

; код дополнительной роли пользователя
additionallyRoleCode = 2

; связывать роль администратора с пользователем по его имени или коду (name, code)
relationRolesBy = code

; подстрока, которую необхоимо искать в имени пользователя, что бы он стал администратором
substringInAdminName = Администратор

; список кодов пользователей, которые имеют дополнительные роли, разделенные через запятые
usersWithAdditionallyRole = 1,2,3

; Устанавливать минимальную цену при отсутствии ограничения по скидке (по умолчанию True)
;setMinPriceIfDiscountRestrictMissing = True

[upload.converter.smag-ukm.group2catalog]
; Связать товар с каталогом по коду группу
; Если товар входит в группу 1, а у группы 1 есть связка с каталогом 2, в tmccatalog будет связка (код товара, код каталога 2)
; <код группы товара> = <код каталога>
;0000.0000.0000.0000.0001 = 1
;0000.0000.0000.0000.0002 = 2

[upload.converter.smag-ukm4]
; список файлов-флагов, разделенный запятыми
;flags = /tmp/dict/smag/*.cng, /tmp/dict/smag/*.upd

; список файлов-справочников, разделенный запятыми
;data = /tmp/dict/smag/*.dat

; файл в который будет записываться текст последней ошибки конвертирования
;errorDest = /tmp/dict/smag/error.txt

; Кодовая страница данных.
; Примеры кодировок: utf_8, U8, UTF, utf8, cp1251, windows-1251, cp866, 866, IBM866 и др.
charset = 866

; формат данных (dat, dbf)
format = dat

; режим дисконтной системы (modern, legacy)
discount = modern

; код роли пользователя по умолчанию
defaultRoleCode = 3

; код дополнительной роли пользователя
additionallyRoleCode = 2

; связывать роль администратора с пользователем по его имени или коду (name, code)
relationRolesBy = name

; подстрока, которую необхоимо искать в имени пользователя, что бы он стал администратором
substringInAdminName = Администратор

; список кодов пользователей, которые имеют дополнительные роли, разделенные через запятые
;usersWithAdditionallyRole = 1,2,3

[upload.converter.smag-ukm4.group2catalog]
; Связать товар с каталогом по коду группу
; Если товар входит в группу 1, а у группы 1 есть связка с каталогом 2, в tmccatalog будет связка (код товара, код каталога 2)
; <код группы товара> = <код каталога>
;410 = 16
;413 = 17

[upload.converter.oracle]
; список файлов-флагов, разделенный запятыми
;flags = /tmp/dict/oracle/*.xml

; список файлов-справочников, разделенный запятыми
;data = /tmp/dict/oracle/*.xml

; файл в который будет записываться текст последней ошибки конвертирования
;errorDest = /tmp/dict/oracle/error.txt

[upload.converter.oracle.measure]
; <соответствие кодов единицы измерения>
; <код единицы измерения - артикс> = <код единицы измерения - oracle>
; EA - Штука, G - ГРАММ, GM - ГРАММЫ, KG - КИЛОГРАММ, L - ЛИТР, ML - МИЛЛИЛИТР
1 = EA
2 = KG
;3 = L

[upload.converter.users]
; список файлов-флагов, разделенный запятыми
;flags = /tmp/dict/users/*.txt

; список файлов-справочников, разделенный запятыми
;data = /tmp/dict/users/users.dat

; файл в который будет записываться текст последней ошибки конвертирования
;errorDest = /tmp/dict/users/error.txt

[upload.converter.users.roles]
; <соответствие кодов ролей>
; <код роли> = <название роли>
1 = оператор
2 = администратор
3 = кассир

[upload.converter.crystal]
; список файлов-флагов, разделенный запятыми
flags = /tmp/crystal/products/catalog*.xml,/tmp/crystal/cards/catalog*.xml,/tmp/crystal/additional/*.xml

; список файлов-справочников, разделенный запятыми
; а также список файлов для загрузки визуального подтверждения и обязательного ввода количества
data = /tmp/crystal/products/catalog*.xml,/tmp/crystal/cards/catalog*.xml,/tmp/crystal/additional/*.xml

; файл в который будет записываться текст последней ошибки конвертирования
;errorDest = /tmp/crystal/error.txt

; список кодов групп продаж, требующих "визуального подтверждения" товара, разделенных запятыми
visualverifysg = 1,2,3

; список кодов групп продаж, требующих "обязательного ввода количества" товара, разделенных запятыми
requirequantitymanualsg = 4,5,6

; список соответствия кодов единиц измерения crystal - кодам единиц измерения aif
measuremap = шт-1,1007-2

[upload.converter.sap]
; список файлов-флагов, разделенный запятыми
flags = /tmp/dict/sap/*.xml

; список файлов-справочников, разделенный запятыми
data = /tmp/dict/sap/*.xml

[upload.converter.cif1]
; список файлов-флагов, разделенный запятыми
flags = /tmp/dict/cif1/cif1.flz

; список файлов-справочников, разделенный запятыми
data = /tmp/dict/cif1/*.spr,/tmp/dict/cif1/*.prd,/tmp/dict/cif1/*.brc,/tmp/dict/cif1/*.bar

; файл в который будет записываться текст последней ошибки конвертирования
;errorDest = /tmp/dict/cif1/error.txt

; Настройки очередей
[QUEUE]
; Хост брокера очередей
host=localhost
; Порт брокера очередей
port=5672
; Логин для подключения к брокеру
user=guest
; Пароль для подключения к брокеру
password=guest

; Настройки fileSize и fileCount задают размер и количество журналов для очередей.
; Эти настройки ограничивают размер очереди: 65536 * fileSize * fileCount = queueSize (bytes)
; Где queueSize - размер очереди в байтах. fileSize указывается в байтах.
fileSize = 128
; При указании количества файлов необходимо учитывать, что qpid для каждой очереди постоянно держит все файлы открытыми.
fileCount = 8

; Также размер очереди ограничивается параметром maxSize. Размер указывается в байтах
maxSize = 104857600
; Максимальное количество сообщений в очереди.
maxCount = 3000

; Максимальное количество AIF объектов в одном сообщении
aifObjectsCountInMessage = 2000

[SOAP_UPLOAD]
; Порт для SOAP сервиса
port = 18080
; Максимальный размер тела SOAP запроса в битах. По умолчанию 83886080 (10 MB)
maxContentLength=83886080
; Проверять логин и пароль при SOAP запросе. По умолчанию - False
authorize = False
; Логин для авторизации SOAP запроса. По умолчанию - admin
login = admin
; Пароль для авторизации SOAP запроса. По умолчанию - admin
passwd = admin
; Время простоя сессии (в секундах). Если истекло время, указанное в данной настройке,
; после последнего запроса внутри сессии, то вся сессия отменится. По умолчанию - 300 сек.
sessionIdleTimeout = 300
; Являются ли коды магазинов, которые передают в запросе идентификаторами магазинов. По умолчанию - False
shopCodeIsShopId = False
; Максимальное количество архивов запросов для одного магазина в бэкап директории (устаревшие архивы будут удаляться)
; Если указать значение 0, то данная настройка учитываться не будет
maxCountBackupRequests = 0
; Количество дней актуальности архивов запросов для одного магазина в бэкап директории (устаревшие архивы будут удаляться)
; Если указать значение 0, то данная настройка учитываться не будет
actualCountDaysForBackupRequests = 3
; Использовать сессионную загрузку справочников. По умолчанию - False
useSession = False
; Использовать валидацию SOAP запросов.  По умолчанию - False
useValidation = False
; В один момент времени разрешать грузить только один справочник в магазин при использовании сессионного режима
singleShopSession = False
; Многопоточный режим загрузки через SOAP сервис
multiprocessing = False

[REST_UPLOAD]
; Порт для REST сервиса
port = 28080
; Проверять логин и пароль при REST запросе. По умолчанию - True
authorize = True
; Логин для авторизации REST запроса. По умолчанию - admin
login = admin
; Пароль для авторизации REST запроса. По умолчанию - admin
passwd = admin
; Максимальное количество архивов запросов для одного магазина в бэкап директории (устаревшие архивы будут удаляться)
; Если указать значение 0, то данная настройка учитываться не будет
maxCountBackupRequests = 0
; Количество дней актуальности архивов запросов для одного магазина в бэкап директории (устаревшие архивы будут удаляться)
; Если указать значение 0, то данная настройка учитываться не будет
actualCountDaysForBackupRequests = 3
